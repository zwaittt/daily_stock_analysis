# è‡ªåŠ¨å…³é—­è¿‡æœŸçš„ Issues å’Œ PR
# æ¯å¤©æ£€æŸ¥ä¸€æ¬¡ï¼Œæ ‡è®°é•¿æ—¶é—´æ— å“åº”çš„ issues/PRs

name: Stale Issues & PRs

on:
  schedule:
    # æ¯å¤© UTC 0:00ï¼ˆåŒ—äº¬æ—¶é—´ 8:00ï¼‰æ£€æŸ¥ä¸€æ¬¡
    - cron: '0 0 * * *'
  # æ”¯æŒæ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: ğŸ§¹ æ¸…ç†è¿‡æœŸ Issues/PRs
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ·ï¸ æ ‡è®°å¹¶å…³é—­è¿‡æœŸå†…å®¹
        uses: actions/stale@v9
        with:
          # ===== Issue é…ç½® =====
          days-before-issue-stale: 7
          days-before-issue-close: 7
          stale-issue-label: 'stale'
          stale-issue-message: |
            ğŸ‘‹ è¿™ä¸ª Issue å·²ç» **7 å¤©** æ²¡æœ‰æ´»åŠ¨äº†ã€‚
            
            å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·å›å¤è¯´æ˜æœ€æ–°æƒ…å†µï¼Œæˆ‘ä»¬ä¼šç»§ç»­è·Ÿè¿›ã€‚
            å¦‚æœé—®é¢˜å·²è§£å†³æˆ–ä¸å†éœ€è¦ï¼Œå¯ä»¥ç›´æ¥å…³é—­æ­¤ Issueã€‚
            
            **å¦‚æœ 7 å¤©å†…æ²¡æœ‰å›å¤ï¼Œæ­¤ Issue å°†è‡ªåŠ¨å…³é—­ã€‚**
          close-issue-message: |
            ğŸ”’ ç”±äºé•¿æ—¶é—´æ²¡æœ‰æ´»åŠ¨ï¼Œæ­¤ Issue å·²è‡ªåŠ¨å…³é—­ã€‚
            
            å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œæ¬¢è¿é‡æ–°æ‰“å¼€æˆ–åˆ›å»ºæ–°çš„ Issueã€‚
          
          # ===== PR é…ç½® =====
          days-before-pr-stale: 21
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          stale-pr-message: |
            ğŸ‘‹ è¿™ä¸ª PR å·²ç» **21 å¤©** æ²¡æœ‰æ´»åŠ¨äº†ã€‚
            
            è¯·æ£€æŸ¥æ˜¯å¦éœ€è¦ï¼š
            - è§£å†³åˆå¹¶å†²çª
            - å›å¤ review æ„è§
            - æ›´æ–°ä»£ç 
            
            **å¦‚æœ 14 å¤©å†…æ²¡æœ‰æ›´æ–°ï¼Œæ­¤ PR å°†è‡ªåŠ¨å…³é—­ã€‚**
          close-pr-message: |
            ğŸ”’ ç”±äºé•¿æ—¶é—´æ²¡æœ‰æ´»åŠ¨ï¼Œæ­¤ PR å·²è‡ªåŠ¨å…³é—­ã€‚
            
            å¦‚æœæ‚¨ä»å¸Œæœ›åˆå…¥è¿™äº›æ›´æ”¹ï¼Œè¯·é‡æ–°æ‰“å¼€æˆ–åˆ›å»ºæ–°çš„ PRã€‚
          
          # ===== æ’é™¤è§„åˆ™ =====
          # å¸¦æœ‰è¿™äº›æ ‡ç­¾çš„ä¸ä¼šè¢«æ ‡è®°ä¸º stale
          exempt-issue-labels: 'pinned,security,enhancement,help wanted,good first issue'
          exempt-pr-labels: 'pinned,security,work-in-progress,wip'
          
          # æ’é™¤è‰ç¨¿ PR
          exempt-draft-pr: true
          
          # ===== å…¶ä»–é…ç½® =====
          # æ¯æ¬¡è¿è¡Œæœ€å¤šå¤„ç†çš„æ•°é‡
          operations-per-run: 50
          
          # åªå¤„ç†è¿™äº›çŠ¶æ€çš„
          only-labels: ''
          
          # ç§»é™¤ stale æ ‡ç­¾ï¼ˆå½“æœ‰æ–°æ´»åŠ¨æ—¶ï¼‰
          remove-stale-when-updated: true
          
          # è°ƒè¯•æ¨¡å¼ï¼ˆè®¾ä¸º true æ—¶åªæ‰“å°ä¸å®é™…æ“ä½œï¼‰
          debug-only: false
